/*******************************************
*   Product Tile module
*******************************************/

@import "../variables";
@import "product-tile-mixins";

$onecol: 8px;

.products {
    width: 100%;
    clear: left;
}

.listing .ssb_block {
	.rr-product{
		.products{
			  .rating {
			    position: relative;
			    top: 2px;
			    float: left;
			    width: 70px;
			    height: 12px;
			    margin-right: 5px;
			    text-indent: 100%;
			    overflow: hidden;
			    white-space: nowrap;
			    background: url("../img/star-rating-sprite.png") repeat-x 0 0;

                &.icon{
			        font-size: 0;
			    }
			    .no-touch &:hover {

			      color: #7C765F !important;
			    }
			    &:before {
			      position: absolute;
			      top: -1px;
			      left: -60px;
			      width: 60px;
			      font-size: 12px;
			      color:$putty;
			      &:hover {
			        color: #7C765F;
			      }
	    		}
	  		}
			  .stars {
			    position: absolute;
			    background: url("../img/star-rating-sprite.png") repeat-x 0 -12px;
			    top: 0;
			    left: 0;
			    display: block;
			    width: 0;
			    height: 12px;
			    text-indent: 100%;
			    white-space: nowrap;
			    &:before {
			      position: absolute;
			      top: -1px;
			      left: 0px;
			      width: 14px;
			      color: #ffc600;
			      font-size: 12px;
			    }
				&:after{
					width: 14px !important;
				}

			    &.stars:after {
			      content: '';
			      display: block;
			      overflow: hidden;
			      position: absolute;
			      top: 0;
			      right: 0;
			      background: url('../img/star-rating-sprite.png') repeat-x 0 -12px;
			      width: 10px !important;
			      height: 0;
			    }
			    &.point-25:after {
			      height: 5px;
			      width: 10px;
			      right: -10px;
			      @include border-radius(0 0 12px/8px 0);
			    }
			    &.point-5:after {
			      height: 6px;
			      width: 12px;
			      right: -12px;
			      @include border-radius(0 0 12px/9px 0);
			    }
			    &.point-75:after {
			      height: 7px;
			      width: 14px;
			      right: -14px;
			      @include border-radius(0 0 12px/10px 0);
			    }
			    &.stars-1 {
			    	width: 20%;
			    	&:after {
			      		right: -10px !important;
			    	}
			    }
			    &.stars-2 {
			    	width: 40%;
			    	&:after {
				      right: -10px !important;
				    }
			    }
			    &.stars-3 {
			    	width: 60%;
			    	&:after {
				      right: -10px !important;
				    }
			    }
			    &.stars-4 {
			    	width: 80%;
			    	&:after {
				      right: -10px !important;
				    }
			    }
			    &.stars-5 {
			    	width: 100%;
			    }
	  		}
		}
	}
}

#main-content #listing .product-tile:hover {
	cursor: pointer;
}

.products-header {
  border-bottom: 1px solid $pagePutty;
  padding: 16px;
  margin: 8px 0 0;
  background: white;
  &:after {
    @include clear-fix;
  }
}
.products>li {
    float: left;
    overflow: hidden;
    position: relative;
    color: $primaryTextColor;
    font-size: 10px;
    white-space: normal;
    letter-spacing: normal;
    word-spacing: normal;

    @include newIcon;
    @include percentageIcon(170px, 15px);
    @include bcveIcon;

	$product-tile-font-size-small  : 12px;
	$product-tile-font-size-medium : 14px;
	$product-tile-font-size-large  : 20px;

    .product {
        background: #fff;
        border-width: 1px 1px 1px 0px;
        border-style: solid;
        border-color: #ffffff $primaryBorderColor #ffffff #ffffff;
        display: block;
        text-decoration: none;
        position: relative;
        font-size: 13px;
    	padding: 16px;

        // PRODUCT IMAGE
        a.thumbnail {
        	color: #3E3E3F; /* #52409 - UX Polishing */
            display: block;
      		margin: 0px 0px 16px 0px;
            img {
                display: block;
                margin: 0 auto;
            }
            img.bcve_ping {
            	width: auto;
            	height: auto;
            }
        }

		// PRODUCT TITLE - min-height set in CSS only - JS to determine actual height
		// min height used to distribute white space when no author/artist, no format/release date and
		// no unavilable/special offers information displayed - this is to stop all white space
		// appearing at the base of the tile
		.title-author-format {
      p.format-release {
        height: 14px;
      }
      #listing & {
        padding: 0px 8px;
      }

	        h3 {
                overflow: hidden;
                margin-bottom: 16px;
                font-weight: normal;
                font-size: 15px;
                line-height: 18px;
                font-family: "Tesco", Helvetica Neue, Arial, sans-serif;
            }

            #listing & {
	        h3 {
	            width: 100%;
				margin: 0;
				line-height: 20px;
				font-size: $product-tile-font-size-medium;
				font-family: "Helvetica", Arial, sans-serif;
				overflow: hidden;

	            a {
					line-height: 20px;
				}
	        }
	        }
	        .author,
	        .format-release {
	            margin: 0;
	            padding: 0;
				font-size: $product-tile-font-size-small;
				line-height: 1.2em;
                color: $putty;
				// author/artist and format/release will only ever appear as a single line
				// use css ellipsis rather than JS ellipsis to improve performance
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
	        }
	   	}

        .average-rating {
            margin-left: 0;
        }

        .total-reviewers,
        a.rating + a {
        	color: $putty;
        }

        // RATINGS - height set in CSS only as it never changes and is always visible
		.rating-container {
			margin-bottom: 8px;
			/*height: 14px;*/
			clear: both;

			.total-reviewers {
			 font-size: 13px;
			 line-height: 1;
			 font-family: "Tesco", Helvetica, Arial, sans-serif;
			}

			#listing & {
			 margin: 8px 0 8px 8px;

			 .total-reviewers {
			font-size: $product-tile-font-size-small;
			     line-height: 14px;
			     font-family: Helvetica, Arial, sans-serif;
			 }
			}
		}

		// BUY FROM/SELLER - do not set height in CSS, it might not be enough if seller name spans 2 lines
		.buy-block {
			margin: 12px 0;
			font-size: $product-tile-font-size-small;
			.retailer {
				font-weight: bold;
			}
		}

        .ratings,
        .buy-block {/*
            min-height: 12px;
            margin: 0 0 12px;
            padding: 0;
            font-size: 12px;
            clear: left;
            white-space: nowrap;*/
        }

       	// FORMER PRICE - height set in JS
        .former-prices {
            clear: both;
			min-height: 14px;
			margin-top: 8px;
			margin-right: 0;
            li {
                white-space: nowrap;
                color: #7c765f;
                padding-right: 1px;
                font-size: $product-tile-font-size-small;
                line-height: $product-tile-font-size-medium;
                text-decoration: line-through;
				display: table-cell;
            }
        }

        // SAVINGS
        .saving {
            clear: left;
            margin: 0;
            padding: 0;
            color: #ee1c2e;
            font-size: 14px;
            line-height: 14px;
            font-weight: bold;
        }

		// ACTUAL PRICE - height set in CSS only as it never changes and is always visible
        .price {
            margin: 0;
            font-family: "Tesco", Helvetica, Arial, sans-serif;
            font-weight: bold;
            font-size: 20px;
            line-height: 1;
            white-space: nowrap;
            .from {
            	line-height: 17px;
                font-size: 12px;
                font-weight: normal;
                @include tescoFont;
            }
        }

		// UNAVILABLE/SPECIAL OFFERS - optional, height set in CSS only as it never changes
		// * always last to appear in product tile for kiosk
		.additional-info {
			display: block;
			clear: both;
			margin: 0 0 16px;
			font-size: $product-tile-font-size-small;
			}
		// note: additional-info can be either SPAN (unavailable) or an ANCHOR (special offers)
		a.additional-info:hover {
			text-decoration: underline;
			color: $linkHoverColor;
		}

		.button-container {
            margin: 8px 0 10px;
		}
	}

    .ping {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 10;
        margin: 0;
        padding: 2px $onecol (0.5 * $onecol);
        font-size: 10px;
        line-height: 10px;
        background: #ee1d2e;
        color: #fff;
    }
}
#listing p.format-release {
    color: $putty;
}
$brand-tile-height: 60px;

.shop-by.nav {
    clear: both;
    &:after {
        @include clear-fix;
    }
}

.product-carousel.shop-by,
.product-grid.shop-by {
    .view-all {
        display: none;
    }
    .products > li {
        margin-bottom: 0;
        overflow: visible;

    &:last-child {
      border-width: 0px;
    }

        .product {
            padding: 0;
            a {
                display: block;
                min-height: $brand-tile-height;
                line-height: $brand-tile-height - 2px; // compensate for border
                text-align: center;
                font-size: 1.2em;
                img {
                    vertical-align: middle;
                }
            }
        }
    }
}

.streamline-basket-carousel .products > li .product a {
    text-align:left;
}

.product-grid.shop-by {
    .products > li {
        margin-bottom: 16px;
    }
}

.no-touch {
	.product {
		.rating-container {
			a:hover {
				text-decoration: underline;
			}
		}
	}
}
.product-grid {
    &.shop-by {

        .products-header {
            border-top: 1px solid $lightPutty;
            border-bottom: none;
            padding: 12px 0 0 0;
            background: transparent;
        }

        .products {
            padding-bottom: 16px;
        }
    }
}
.product-carousel .products>li .product img {
     display: block;
     margin: 0 auto;
     width: 100%;
     height: 100%;
}
